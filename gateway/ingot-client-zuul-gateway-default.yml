spring:
  http:
    encoding:
      charset: UTF-8
      force: true
      enabled: true

zuul:
  add-host-header: true
  add-proxy-headers: true
  host:
    socket-timeout-millis: 60000
    connect-timeout-millis: 60000
  force-original-query-string-encoding: true
  routes:
    ac-route:
      sensitiveHeaders:
      path: /ac/**
      service-id: ingot-client-ac
      ribbon:
        eager-load:
          enabled: true
        MaxAutoRetries: 1
        MaxAutoRetriesNextServer: 2
        OkToRetryOnAllOperations: false
        ConnectTimeout: 20000
        ReadTimeout: 20000
    uc-route:
      sensitiveHeaders:
      path: /uc/**
      service-id: ingot-client-uc
      ribbon:
        eager-load:
          enabled: true
        MaxAutoRetries: 1
        MaxAutoRetriesNextServer: 2
        OkToRetryOnAllOperations: false
        ConnectTimeout: 20000
        ReadTimeout: 20000


management:
  endpoint:
    health:
      show-details: ALWAYS

#请求和响应GZIP压缩支持
feign:
  httpclient:
    enabled: false
  okhttp:
    enabled: true
  compression:
    request:
      enabled: true
      mime-types: text/xml,application/xml,application/json
      min-request-size: 2048
    response:
      enabled: true

security:
  oauth2:
    client:
      client-id: ${spring.application.name}
      client-secret: '{cipher}AQBAqCjGq97UVRkoVbd85OLd4oOTs3+Fr8phkWpG1pj0FH0p+4vcWAEsJoGm37kLID6+cEfn7tvS+el/LeIe3YjM0Cu4b1p/oD2jUEuLi2o3cPU5ZvcEhURQbZrde4Wn6J+6DUEhRBOJkjq50W7DqGZ6IJr7fkN+0Rtwl8sBIylcyy2ODTAgRVHLvanelqEx+pJFm3To3ZeO4VgbDIBaUTJuZvZ3KFLMNCnw2ojpuXjNv8folAn5gvX7AU7EBfK0iK9wOGg5vD7Si/TOdvvTIwCUPaYF7JfAQEXM/neD7tMhstFZLj+BIUWCkcdkRZMunIzdGMOgnss5+Rz4P/vO6FpO0ZVxAadUK09YjGOb8ONmvsSAYiE7wqOUqBCVYL8UrneOlpGhDNvw0M+aiNUMvPBUKYsWs6cQtf83AE5eg1ji+g=='
      access-token-uri: http://ingot-auth-center:8050/oauth/token
      user-authorization-uri: http://ingot-auth-center:8050/oauth/authorize
    resource:
      id: ingot-resource-zuul-gateway
      user-info-uri: http://ingot-auth-center:8050/user
      prefer-token-info: false
      jwt:
        key-uri: http://ingot-auth-center:8050/oauth/token_key

proxy:
  auth:
    routes:
      ac-route: oauth2
      uc-route: oauth2

# swagger butler配置
swagger:
  butler:
    api-docs-path: v2/api-docs
    swagger-version: 2.0
    auto-generate-from-zuul-routes: true
    generate-routes: uc-route,ac-route

ingot:
  job:
    xxl:
      admin:
        addresses: http://${INGOT_TMC_HOST:ingot-task-manager-center}:8060
      executor:
        appname: ${spring.application.name}
        ip:
        port: 9700
        logpath: /data/ingot/logs/${spring.application.name}/jobhandler
        logretentiondays: -1
      accessToken: '{cipher}AQAAyCI7/2E40wP2e5RMuZ6pgAETmxvQjaGuLHMIFHynP2tDC8LCo4t7mlRVgU0h+s8Jbxbb+e7pEG9th/HeyPfNQ+GfZQSTn5cfLtHbJMMZYLN7yKOYJl7I+9rku3OiYyJideYU4BYG+EMU+5Xzq+3zfsY7HvsPAn561wo9kfwjPWnRlPprwDJJgptfMygbjmbFoUo/jeJ/GXojALNME76oSp6gxl3bqrRaTfCGYL5iPZNJbXTMFgC1IyNpvaa+DUa6WQ1KD3Dk4wM3pmfe+OUQuaEL7W8hoyinlWidOjrFOvu+bQO7241jMFByKDFwxx3i/EAHQInu4brvaryS52dLijAoZC59oZuCghcxWzmVrbrXiAAgSOd6ZSTuQtmevRjD8qeXhmIsVuPXNEcmMAOm'
  application:
    dataCenterId: 2
    machineId: 0
  oauth2:
    resource:
      permit:
        - /ac/auth/user/refreshToken
        - /ac/auth/code/**
        - /ac/auth/login
        - /ac/auth/admin/login
        - /ac/auth/admin/modifyPasswordByMobile
        - /hwapp/**
